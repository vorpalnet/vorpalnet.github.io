<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Mon Apr 06 22:51:33 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>B2buaHelper (SIP Servlet API 2.0 API)</title>
<meta name="date" content="2015-04-06">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="B2buaHelper (SIP Servlet API 2.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/B2buaHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../javax/servlet/sip/AutomaticProcessingListener.html" title="interface in javax.servlet.sip"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../javax/servlet/sip/ConcurrencyMode.html" title="enum in javax.servlet.sip"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?javax/servlet/sip/B2buaHelper.html" target="_top">Frames</a></li>
<li><a href="B2buaHelper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">javax.servlet.sip</div>
<h2 title="Interface B2buaHelper" class="title">Interface B2buaHelper</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="strong">B2buaHelper</span></pre>
<div class="block">Helper class providing support for B2BUA applications. An instance of this
 class can be retrieved from a <code>SipServletRequest</code> by invoking
 the method <a href="../../../javax/servlet/sip/SipServletRequest.html#getB2buaHelper()"><code>SipServletRequest.getB2buaHelper()</code></a>.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.1</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#createCancel(javax.servlet.sip.SipSession)">createCancel</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</code>
<div class="block">Creates a new CANCEL request to cancel the initial request sent on the other
 leg.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest)">createRequest</a></strong>(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest)</code>
<div class="block">Creates a new request object belonging to a new SipSession.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)">createRequest</a></strong>(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest,
             boolean&nbsp;linked,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;headerMap)</code>
<div class="block">Creates a new request object belonging to a new SipSession.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)">createRequest</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
             <a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;headerMap)</code>
<div class="block">Creates a new subsequent request based on the specified original
 request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletResponse.html" title="interface in javax.servlet.sip">SipServletResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#createResponseToOriginalRequest(javax.servlet.sip.SipSession, int, java.lang.String)">createResponseToOriginalRequest</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
                               int&nbsp;status,
                               <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reasonPhrase)</code>
<div class="block">The request that results in creation of a SipSession is termed as the
 original request, a response to this original request can be created by
 the application even if the request was committed and application does
 not have a reference to this Request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSession(javax.servlet.sip.SipSession)">getLinkedSession</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</code>
<div class="block">Returns the other SipSession that is linked to the specified SipSession,
 or null if none.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a></code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSipServletRequest(javax.servlet.sip.SipServletRequest)">getLinkedSipServletRequest</a></strong>(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;req)</code>
<div class="block">If a new request is created based on an existing one with the 
 link argument true using <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><code>createRequest(SipServletRequest, boolean, java.util.Map)</code></a>
 or using <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><code>createRequest(SipSession, SipServletRequest, java.util.Map)</code></a>
 the new request gets implicitly linked with the original request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../javax/servlet/sip/SipServletMessage.html" title="interface in javax.servlet.sip">SipServletMessage</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#getPendingMessages(javax.servlet.sip.SipSession, javax.servlet.sip.UAMode)">getPendingMessages</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
                  <a href="../../../javax/servlet/sip/UAMode.html" title="enum in javax.servlet.sip">UAMode</a>&nbsp;mode)</code>
<div class="block">For the specified SipSession, returns a List of all uncommitted messages
 in the order of increasing CSeq number for the given mode of the session.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)">linkSipSessions</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session1,
               <a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session2)</code>
<div class="block">Links the specified sessions, such that there is a 1-1 mapping
 between them.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../javax/servlet/sip/B2buaHelper.html#unlinkSipSessions(javax.servlet.sip.SipSession)">unlinkSipSessions</a></strong>(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</code>
<div class="block">If the specified SipSession is linked to another session, then unlinks
 the two sessions from each other.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLinkedSession(javax.servlet.sip.SipSession)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLinkedSession</h4>
<pre><a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;getLinkedSession(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</pre>
<div class="block">Returns the other SipSession that is linked to the specified SipSession,
 or null if none. The sessions get linked by either explicit call to 
 <a href="../../../javax/servlet/sip/B2buaHelper.html#linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)"><code>linkSipSessions(SipSession, SipSession)</code></a> or
 <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><code>createRequest(SipServletRequest, boolean, java.util.Map)</code></a></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the SipSession from which to obtain the linked session</dd>
<dt><span class="strong">Returns:</span></dt><dd>the linked SipSession, or null if none</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the session is invalid</dd></dl>
</li>
</ul>
<a name="getLinkedSipServletRequest(javax.servlet.sip.SipServletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLinkedSipServletRequest</h4>
<pre><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;getLinkedSipServletRequest(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;req)</pre>
<div class="block">If a new request is created based on an existing one with the 
 link argument true using <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><code>createRequest(SipServletRequest, boolean, java.util.Map)</code></a>
 or using <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><code>createRequest(SipSession, SipServletRequest, java.util.Map)</code></a>
 the new request gets implicitly linked with the original request. 
 This method is to be used to retrieve the linked request. There is no
 explicit linking/unlinking like that of the session for requests. However unlinking 
 of sessions also result in unlinking of linked requests.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - other request</dd>
<dt><span class="strong">Returns:</span></dt><dd>the linked request</dd></dl>
</li>
</ul>
<a name="linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>linkSipSessions</h4>
<pre>void&nbsp;linkSipSessions(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session1,
                   <a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session2)</pre>
<div class="block">Links the specified sessions, such that there is a 1-1 mapping
 between them. Each session can retrieved from the other by calling
 <a href="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSession(javax.servlet.sip.SipSession)"><code>getLinkedSession(javax.servlet.sip.SipSession)</code></a>. One SipSession at any given time can be
 linked to only one other SipSession belonging to the same
 SipApplicationSession. Calling <code>linkSessions()</code> with already 
 linked sessions to each other is a no-op and is to be silently ignored, while 
 calling <code>linkSessions()</code> with any of the session linked with
 <i>other</i> sessions result in <code>java.lang.IllegalArgumentException</code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session1</code> - the first SipSession to link</dd><dd><code>session2</code> - the other SipSession to link</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if either of the specified sessions
         has been terminated or the sessions do not belong to the same
         application session or one or both the sessions are already linked 
         with some other session(s)</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if any of the arguments is null</dd></dl>
</li>
</ul>
<a name="unlinkSipSessions(javax.servlet.sip.SipSession)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlinkSipSessions</h4>
<pre>void&nbsp;unlinkSipSessions(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</pre>
<div class="block">If the specified SipSession is linked to another session, then unlinks
 the two sessions from each other. This also implicitly unlinks the linkage
 at the request level.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session to be unlinked</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the session is not currently linked
         to another session or it has been terminated</dd></dl>
</li>
</ul>
<a name="getPendingMessages(javax.servlet.sip.SipSession, javax.servlet.sip.UAMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingMessages</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../javax/servlet/sip/SipServletMessage.html" title="interface in javax.servlet.sip">SipServletMessage</a>&gt;&nbsp;getPendingMessages(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
                                         <a href="../../../javax/servlet/sip/UAMode.html" title="enum in javax.servlet.sip">UAMode</a>&nbsp;mode)</pre>
<div class="block">For the specified SipSession, returns a List of all uncommitted messages
 in the order of increasing CSeq number for the given mode of the session.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the SipSession to check for pending messages</dd><dd><code>mode</code> - the mode for which the pending messages are required, one of UAC or UAS</dd>
<dt><span class="strong">Returns:</span></dt><dd>the list of <code>SipServletMessage</code> objects representing
         pending messages for the session, or the empty list if none</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the session is invalid</dd></dl>
</li>
</ul>
<a name="createResponseToOriginalRequest(javax.servlet.sip.SipSession, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createResponseToOriginalRequest</h4>
<pre><a href="../../../javax/servlet/sip/SipServletResponse.html" title="interface in javax.servlet.sip">SipServletResponse</a>&nbsp;createResponseToOriginalRequest(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
                                                 int&nbsp;status,
                                                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reasonPhrase)</pre>
<div class="block">The request that results in creation of a SipSession is termed as the
 original request, a response to this original request can be created by
 the application even if the request was committed and application does
 not have a reference to this Request. This is required because the B2BUA
 application may require to send more than one successful response to a
 request. For example when a downstream proxy forked and more than one
 success responses are to be forwarded upstream. This can only be
 required on initial requests, as only original requests shall need such
 multiple responses.

 <p>The response thus generated must have a different <code>To</code> tag from the
 other responses generated to the Request and must result in a different
 SipSession. In this (and similar) cases the container clones the
 original SipSession for the second and subsequentdialogs, as detailed
 above. The cloned session object will contain the same application data
 but its createRequest method will create requests belonging to that
 second or subsequent dialog, that is, with a <code>To</code> tag specific to that
 dialog.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the SipSession for the original request</dd><dd><code>status</code> - the status code for the response</dd><dd><code>reasonPhrase</code> - the reason phrase for the response, or null to use
                     a default reason phrase</dd>
<dt><span class="strong">Returns:</span></dt><dd>the resulting <code>SipServletResponse</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if a subsequent response is inconsistent
         with an already sent response. For example, a 400 response
         following a 200 OK response.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the session is invalid</dd></dl>
</li>
</ul>
<a name="createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRequest</h4>
<pre><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;createRequest(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest,
                              boolean&nbsp;linked,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;headerMap)
                                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a>,
                                       <a href="../../../javax/servlet/sip/TooManyHopsException.html" title="class in javax.servlet.sip">TooManyHopsException</a></pre>
<div class="block">Creates a new request object belonging to a new SipSession. The
 new request is similar to the specified <code>origRequest</code>
 in that the method and the majority of header fields are copied
 from <code>origRequest</code> to the new request.  
 The headerMap parameter can contain From, To, Contact, Route headers and any
 non system header. The header field map is then used to override the
 headers in the newly created request. If an empty list is supplied for a
 particular header in the headerMap, then that header will be removed.
 The SipSession created for the new request also shares the same 
 SipApplicationSession
 associated with the original request.

 <p>This method satisfies the following rules:
 <ul>
 <li> Whether the From header is overridden through the headerMap or 
 not the    
 From header field of the new request has a new tag chosen by the 
 container. </li>
 <li> If the From header is included in the headerMap and has a tag 
 then it is ignored and container chosen tag is inserted instead. 
 </li>
 <li>The To header field of the new request has no tag.
 <li>Record-Route and Via header fields are not copied. As usual,
     the container will add its own Via header field to the request
     when it's actually sent outside the application server.
 <li>For non-REGISTER requests, the Contact header field is not
     copied but is populated by the container as usual but if Contact 
     header is present in the headerMap then relevant portions of 
     Contact header is to be used in the request created, in accordance
     with section 4.1.3 of the specification.
 </ul>
 
 <p>This method provides a convenient and efficient way of
 constructing the second "leg" of a B2BUA application, giving the 
 additional flexibility of changing the headers including From, To, Contact
 and Route.
 
 <p>This method will also perform loop detection. 
 If the value of the original request's Max-Forwards header field is 0,
 then TooManyHopsException is thrown and a 483 (Too many hops) 
 response is sent for the original request. Otherwise, the value of the 
 new requests Max-Forwards header is set to that of the original request 
 minus one.
 <p>It is used only for the initial request. Subsequent requests in either leg
 must be created using <a href="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><code>SipSession.createRequest(java.lang.String)</code></a> or <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><code>createRequest(SipSession, SipServletRequest, java.util.Map)</code></a> as usual.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>origRequest</code> - request to be "copied"</dd><dd><code>linked</code> - indicating if the resulting session should be linked with original or not</dd><dd><code>headerMap</code> - a simple map containing header names and their 
 values to be overridden in the new request. The values can be a specified in a 
 <code>java.util.List</code> to accomodate for multi-valued headers</dd>
<dt><span class="strong">Returns:</span></dt><dd>the "copied" request object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the headerMap contains a system
 header other than From, To, Contact and Route (see section 4.1.3 to see what part of Contact header is to be used)
 or some other header not relevant for the context, or the <code>origRequest</code> and 
 its session is linked to some other request/session and the <code>linked</code> flag is true,
 or if the <code>origRequest</code> is not initial</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the original request is null</dd>
<dd><code><a href="../../../javax/servlet/sip/TooManyHopsException.html" title="class in javax.servlet.sip">TooManyHopsException</a></code> - if the original request's Max-Forwards header value is 0</dd></dl>
</li>
</ul>
<a name="createRequest(javax.servlet.sip.SipServletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRequest</h4>
<pre><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;createRequest(<a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest)</pre>
<div class="block">Creates a new request object belonging to a new SipSession. The
 new request is similar to the specified <code>origRequest</code>
 in that the method and the majority of header fields are copied
 from <code>origRequest</code> to the new request.  The SipSession
 created for the new request also shares the same SipApplicationSession
 associated with the original request.

 <p>This method satisfies the following rules:
 <ul>
 <li>The From header field of the new request has a new tag chosen
     by the container.
 <li>The To header field of the new request has no tag.
 <li>The new request (and the corresponding <code>SipSession</code>)is
     assigned a new Call-ID.
 <li>Record-Route and Via header fields are not copied. As usual,
     the container will add its own Via header field to the request
     when it's actually sent outside the application server.
 <li>For non-REGISTER requests, the Contact header field is not
     copied but is populated by the container as usual.
 </ul>

 <p>This method provides a convenient and efficient way of
 constructing a new "leg" of a B2BUA application. It is used
 only for the initial request. Subsequent requests in either leg
 must be created using <a href="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><code>SipSession.createRequest(java.lang.String)</code></a> or
 <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><code>createRequest(SipSession, SipServletRequest, java.util.Map)</code></a> as usual.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>origRequest</code> - request to be "copied"</dd>
<dt><span class="strong">Returns:</span></dt><dd>the "copied" request object</dd></dl>
</li>
</ul>
<a name="createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRequest</h4>
<pre><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;createRequest(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session,
                              <a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;origRequest,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;headerMap)
                                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></pre>
<div class="block">Creates a new subsequent request based on the specified original
 request. This results in automatically linking the two SipSessions
 (if they are not already linked) and the two SipServletRequests.

 <p>This method, though similar to the factory method of creating the
 request for a B2BUA for initial requests, is to be used for subsequent
 requests.
 The semantics are similar to <a href="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><code>SipSession.createRequest(String)</code></a> 
 except that here it copies non system headers from the original request
 onto the new request, the system headers are created based on the session
 that this request is created on. Further the Route headers are set as 
 based on the session route set. The method of the new request is same 
 as that of the <code>origRequest</code>.  If Contact header is present in
 the headerMap then relevant portions of the Contact header are to be used
 in the request created, in accordance with section 4.1.3 of the specification.
 If From and To headers are present in the headerMap then all parts of
 those headers except the tag parameter are to be used in the request 
 created, in accordance with section 4.1.2 of the specification. If an empty
 list is supplied for a particular header in the headerMap,
 then that header will be removed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session on which this request is to be created</dd><dd><code>origRequest</code> - the original request</dd><dd><code>headerMap</code> - the header map used to override the headers in the new
 subsequent request created. Also see
 <a href="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><code>createRequest(SipServletRequest, boolean, java.util.Map)</code></a></dd>
<dt><span class="strong">Returns:</span></dt><dd>the new subsequent request</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the header map contains a system
 header other than Contact, From or To (see sections 4.1.2 and 4.1.3 of
 specification document) or other header which does not makes sense in the context,
 or in case when the <code>session</code> does not belong to the same
 SipApplicationSession as the <code>origRequest</code>, or the original request or session is
 already linked with some other request/session,
 or if the <code>origRequest</code> is not initial</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the original request or the session is null</dd></dl>
</li>
</ul>
<a name="createCancel(javax.servlet.sip.SipSession)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createCancel</h4>
<pre><a href="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</a>&nbsp;createCancel(<a href="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</a>&nbsp;session)</pre>
<div class="block">Creates a new CANCEL request to cancel the initial request sent on the other
 leg. The CANCEL is created by the container using the initial request
 stored in the session corresponding to the other leg.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - the session whose initial request is to be cancelled.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the new CANCEL request to be sent on the other leg</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the session is null</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/B2buaHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../javax/servlet/sip/AutomaticProcessingListener.html" title="interface in javax.servlet.sip"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../javax/servlet/sip/ConcurrencyMode.html" title="enum in javax.servlet.sip"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?javax/servlet/sip/B2buaHelper.html" target="_top">Frames</a></li>
<li><a href="B2buaHelper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright Â© 1996-2015, Oracle and/or its affiliates. All Rights Reserved. Use is subject to license terms.</small></p>
</body>
</html>
